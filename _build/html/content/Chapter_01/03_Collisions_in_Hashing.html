

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>1.3. Collisions in Hashing &#8212; Prob 140 Textbook</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/headers.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mystnb.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.4. The Birthday Problem" href="04_Birthday_Problem.html" />
    <link rel="prev" title="1.2. Equally Likely Outcomes" href="02_Equally_Likely_Outcomes.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Prob 140 Textbook</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <p class="caption">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference external" href="http://prob140.org">
   Course Home
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../To_the_Student.html">
   To the  Student
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Chapters
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="reference internal" href="00_Fundamentals.html">
   1. Fundamentals
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01_Outcome_Space_and_Events.html">
     1.1. Outcome Space and Events
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02_Equally_Likely_Outcomes.html">
     1.2. Equally Likely Outcomes
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     1.3. Collisions in Hashing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_Birthday_Problem.html">
     1.4. The Birthday Problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05_An_Exponential_Approximation.html">
     1.5. An Exponential Approximation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06_Exercises.html">
     1.6. Exercises
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_02/00_Calculating_Chances.html">
   2. Calculating Chances
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_03/00_Random_Variables.html">
   3. Random Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_04/00_Relations_Between_Variables.html">
   4. Relations Between Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_05/00_Collections_of_Events.html">
   5. Collections of Events
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_06/00_Random_Counts.html">
   6. Random Counts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_07/00_Poissonization.html">
   7. Poissonization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_08/00_Expectation.html">
   8. Expectation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_09/00_Conditioning_Revisited.html">
   9. Conditioning, Revisited
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_10/00_Markov_Chains.html">
   10. Markov Chains
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_11/00_Reversing_Markov_Chains.html">
   11. Reversing Markov Chains
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_12/00_Standard_Deviation.html">
   12. Standard Deviation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_13/00_Variance_Via_Covariance.html">
   13. Variance Via Covariance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_14/00_The_Central_Limit_Theorem.html">
   14. The Central Limit Theorem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_15/00_Continuous_Distributions.html">
   15. Continuous Distributions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_16/00_Transformations.html">
   16. Transformations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_17/00_Joint_Densities.html">
   17. Joint Densities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_18/00_The_Normal_and_Gamma_Families.html">
   18. The Normal and Gamma Families
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_19/00_Distributions_of_Sums.html">
   19. Distributions of Sums
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_20/00_Approaches_to_Estimation.html">
   20. Approaches to Estimation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_21/00_The_Beta_and_the_Binomial.html">
   21. The Beta and the Binomial
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_22/00_Prediction.html">
   22. Prediction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_23/00_Multivariate_Normal_RVs.html">
   23. Jointly Normal Random Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_24/00_Simple_Linear_Regression.html">
   24. Simple Linear Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_25/00_Multiple_Regression.html">
   25. Multiple Regression
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/Chapter_01/03_Collisions_in_Hashing.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://prob140.datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com/prob140/textbook&urlpath=tree/textbook/content/Chapter_01/03_Collisions_in_Hashing.ipynb&branch=gh-pages"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> On this page
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#no-collisions">
   1.3.1. No Collisions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#product-of-fractions">
   1.3.2. Product of Fractions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at-least-one-collision">
   1.3.3. At Least One Collision
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="collisions-in-hashing">
<h1><span class="section-number">1.3. </span>Collisions in Hashing<a class="headerlink" href="#collisions-in-hashing" title="Permalink to this headline">¶</a></h1>
<p>In computer science, <em>hash functions</em> assign a code called a <em>hash value</em> to each member of a set of individuals. It’s important that each individual be assigned a unique value. If two individuals are assigned the same value, there is a <em>collision</em>, and this causes trouble in identification. Yet it is cumbersome to keep track of which hash values have and have not been assigned, as the numbers of hash values and individuals can be very large.</p>
<p>What if the hash values were just assigned at random, without taking into account which of them have already been assigned? If there are a large number of distinct values and a relatively small number of individuals, then it seems reasonable to think that the chance of a collision will be small. For example, if there are 1,000 available hash values and only 5 individuals, it doesn’t seem likely that you’ll get a collision if you just pick a random sequence of 5 values for the 5 individuals.</p>
<div class="cell tag_remove-input tag_hide-output docutils container">
</div>
<p>Let’s make some assumptions about randomness and find the probability that there is no collision. Assume that there are <span class="math notranslate nohighlight">\(N\)</span> hash values and <span class="math notranslate nohighlight">\(n\)</span> individuals, and suppose your hash function is such that all <span class="math notranslate nohighlight">\(N^n\)</span> assignments of values to individuals are equally likely. An assignment is a sequence <span class="math notranslate nohighlight">\(a_0 a_1 \ldots a_n\)</span> where for each <span class="math notranslate nohighlight">\(i\)</span>, individual <span class="math notranslate nohighlight">\(i\)</span> is assigned the hash value <span class="math notranslate nohighlight">\(a_i\)</span>.</p>
<p>Notice that we are assuming that each of the <span class="math notranslate nohighlight">\(n\)</span> individuals could be assigned any of the <span class="math notranslate nohighlight">\(N\)</span> values regardless of what has been assigned to others. This includes the truly unfortunate possibility that all <span class="math notranslate nohighlight">\(n\)</span> individuals are assigned the same value.</p>
<div class="section" id="no-collisions">
<h2><span class="section-number">1.3.1. </span>No Collisions<a class="headerlink" href="#no-collisions" title="Permalink to this headline">¶</a></h2>
<p>What is the chance that there are no collisions?</p>
<p>If the number of individuals <span class="math notranslate nohighlight">\(n\)</span> is greater than the number of hash values <span class="math notranslate nohighlight">\(N\)</span>, the answer is 0. If you have more individuals than values, then you are going to have to re-use some values and therefore can’t avoid collisions.</p>
<p>But we are interested in the case where <span class="math notranslate nohighlight">\(n\)</span> is quite small, so we have no problem assuming that <span class="math notranslate nohighlight">\(n \le N\)</span>.</p>
<p>If you look back to Part (i) in the example about random number generators in the previous section, you will find that it is the same as our current question, in the case where <span class="math notranslate nohighlight">\(N = 10\)</span> and <span class="math notranslate nohighlight">\(n=2\)</span>. We can just follow the same process to get our solution here.</p>
<div class="cell tag_remove-input tag_hide-output docutils container">
</div>
<p>By assumption, all <span class="math notranslate nohighlight">\(N^n\)</span> possible assignments are equally likely. Some of these assignments contain no collisions. Our job is to count how many.</p>
<p>You are familiar with Python’s 0-origin indexing system, which comes in handy here. We have to count the number of sequences <span class="math notranslate nohighlight">\(a_0a_1 \ldots a_{n-1}\)</span> where each <span class="math notranslate nohighlight">\(a_i\)</span> is one of the <span class="math notranslate nohighlight">\(N\)</span> hash values and all the <span class="math notranslate nohighlight">\(a_i\)</span>’s are different from each other.</p>
<p>Let’s do it this way:</p>
<ul class="simple">
<li><p>There are <span class="math notranslate nohighlight">\(N\)</span> choices for <span class="math notranslate nohighlight">\(a_0\)</span>.</p></li>
<li><p>For each of those choices, there are <span class="math notranslate nohighlight">\(N-1\)</span> choices for <span class="math notranslate nohighlight">\(a_1\)</span> because <span class="math notranslate nohighlight">\(a_1\)</span> has to be different from <span class="math notranslate nohighlight">\(a_0\)</span>.</p></li>
<li><p>Thus there are <span class="math notranslate nohighlight">\(N(N-1)\)</span> ways of filling Place 0 and Place 1 in the sequence and avoiding a collision.</p></li>
<li><p>For each of these <span class="math notranslate nohighlight">\(N(N-1)\)</span> ways of choosing <span class="math notranslate nohighlight">\(a_0\)</span> and <span class="math notranslate nohighlight">\(a_1\)</span>, there are <span class="math notranslate nohighlight">\(N-2\)</span> choices for <span class="math notranslate nohighlight">\(a_2\)</span>. That’s because <span class="math notranslate nohighlight">\(a_2\)</span> has to be different from both <span class="math notranslate nohighlight">\(a_0\)</span> and <span class="math notranslate nohighlight">\(a_1\)</span> which are different from each other.</p></li>
<li><p>Thus there are <span class="math notranslate nohighlight">\(N(N-1)(N-2)\)</span> ways of filling Places 0, 1, and 2.</p></li>
<li><p>Notice that for each <span class="math notranslate nohighlight">\(i\)</span>, the term in the product corresponding to Place <span class="math notranslate nohighlight">\(i\)</span> is <span class="math notranslate nohighlight">\(N-i\)</span>. This makes the sequence easy to continue up to the end, that is, to Place <span class="math notranslate nohighlight">\((n-1)\)</span>.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(\mbox{no collisions}) ~ &amp;=~ 
\frac{N(N-1)(N-2) \cdots (N-(n-1))}{N^n} \\ \\
&amp;=~ \frac{N(N-1)(N-2) \cdots (N-n+1)}{N^n}
\end{align*}
\end{split}\]</div>
<p>“Continuing the sequence” is an informal process that needs a mathematical justification. You can prove it by the method of induction.</p>
<div class="admonition-quick-check admonition">
<p class="admonition-title">Quick Check</p>
<p>Suppose you roll an ordinary six-sided die four times and keep track of the sequence of faces that appear.</p>
<p><strong>a)</strong> How many possible sequences are there?</p>
<p><strong>b)</strong> Assuming that all the sequences are equally likely, what is the probability that four distinct faces appear?</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<p>(a) <span class="math notranslate nohighlight">\(6^4\)</span></p>
<p>(b) <span class="math notranslate nohighlight">\(\frac{6 \times 5 \times 4 \times 3}{6^4}\)</span></p>
</div>
</div>
<div class="section" id="product-of-fractions">
<h2><span class="section-number">1.3.2. </span>Product of Fractions<a class="headerlink" href="#product-of-fractions" title="Permalink to this headline">¶</a></h2>
<p>In the chance of no collisions, there are <span class="math notranslate nohighlight">\(n\)</span> terms in the product in the numerator, and there are <span class="math notranslate nohighlight">\(n\)</span> factors of <span class="math notranslate nohighlight">\(N\)</span> in the denominator. This allows us to write the formula in a different way, as a product of <span class="math notranslate nohighlight">\(n\)</span> fractions:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(\mbox{no collisions}) ~ &amp;=~
\frac{N}{N} \cdot \frac{N-1}{N} \cdot \frac{N-2}{N} \cdots \frac{N-n+1}{N} \\ \\
&amp;=~ \prod_{i=0}^{n-1} \frac{N-i}{N}
\end{align*}
\end{split}\]</div>
<p>The symbol <span class="math notranslate nohighlight">\(\prod\)</span> is the upper case Greek letter <em>pi</em>. It stands for “product” just as <span class="math notranslate nohighlight">\(\sum\)</span> stands for “sum”.</p>
<p>And now the bad news:</p>
</div>
<div class="section" id="at-least-one-collision">
<h2><span class="section-number">1.3.3. </span>At Least One Collision<a class="headerlink" href="#at-least-one-collision" title="Permalink to this headline">¶</a></h2>
<p>Each sequence either has at least one collision, or it has no collisions. No sequence can be in both of those categories, so by the rules of proportion we have</p>
<div class="math notranslate nohighlight">
\[
P(\mbox{at least one collision}) ~=~ 1 ~-~ \prod_{i=0}^{n-1} \frac{N-i}{N}
\]</div>
<p>We have a formula. That’s great! But is the answer large or is it small? It’s not easy to tell just by looking at the formula. So let’s start examining the answer in different ways.</p>
<p>The first way is numerical. For this, we have to work with numerical values of <span class="math notranslate nohighlight">\(N\)</span> and <span class="math notranslate nohighlight">\(n\)</span>. We’ll do that in a context that has made this calculation famous.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/Chapter_01"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="02_Equally_Likely_Outcomes.html" title="previous page"><span class="section-number">1.2. </span>Equally Likely Outcomes</a>
    <a class='right-next' id="next-link" href="04_Birthday_Problem.html" title="next page"><span class="section-number">1.4. </span>The Birthday Problem</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ani Adhikari<br/>
        
            &copy; Copyright 2020.<br/>
          <div class="extra_footer">
            <p>
License: CC BY-NC-ND 4.0
</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>